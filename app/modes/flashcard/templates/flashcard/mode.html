{% extends "base.html" %}

{% block title %}Flash Card Mode{% endblock %}

{% block content %}
<h1>Flash Card Mode</h1>

<div class="flashcard-controls">
    <p>Choose generation mode:</p>
    <label><input type="radio" name="flashcount" value="auto" checked> Auto</label>
    <label><input type="radio" name="flashcount" value="25"> 25</label>
    <label><input type="radio" name="flashcount" value="50"> 50</label>
    <div>
        <button id="generate-flashcards" class="button">Generate Flashcards</button>
    </div>
</div>

<link rel="stylesheet" href="{{ url_for('flashcard.static', filename='flashcards.css') }}">
<div id="flashcard-container" class="flashcard-container" style="display:none;">
    <div id="flashcard" class="flashcard">
        <div class="flashcard-front">
            <h2 id="flash-term"></h2>
        </div>
        <div class="flashcard-back">
            <p id="flash-definition"></p>
        </div>
    </div>
    <div class="flashcard-nav">
        <button id="prev-card" class="button small">Previous</button>
        <button id="next-card" class="button small">Next</button>
    </div>
    <p id="flash-index"></p>
    <div id="export-controls" class="export-controls">
        <p><strong>You've reached the end of the flashcards!</strong></p>
        <a id="export-pdf-btn" href="#" class="button">Save as PDF</a>
    </div>
</div>

<div id="flash-error" class="flash-error"></div>
{% endblock %}

{% block scripts %}

<div id="flashcard-data" data-flashcards='{{ flashcards|tojson|safe }}' data-topic="{{ topic_name }}">
</div>

<script src="{{ url_for('flashcard.static', filename='mode.js') }}"></script>
<script>
    initFlashcardMode({
        urls: {
            generate: "{{ url_for('flashcard.generate_flashcards_route') }}",
            export_pdf: "{{ url_for('flashcard.export_pdf', topic_name=topic_name) }}"
        }
    });
</script>

{% endblock %}