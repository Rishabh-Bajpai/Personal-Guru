<!DOCTYPE html>
<html>
<head>
    <title>{{ topic.name }}</title>
</head>
<body>
    <h1>{{ topic.name }}</h1>
    <h2>Average Score: {{ average_score }}%</h2>
    {% for step in topic.steps %}
    <h2>{{ topic.plan[loop.index0] }}</h2>
    <p>{{ step.teaching_material }}</p>
    {% if step.questions %}
    <h3>Questions</h3>
    {% for question in step.questions.questions %}
    <div>
        <p><b>{{ loop.index }}. {{ question.question }}</b></p>
        <ul>
            {% for option in question.options %}
            <li>{{ option }}</li>
            {% endfor %}
        </ul>
        <p><i>Correct Answer: {{ question.correct_answer }}</i></p>
        {% if step.user_answers %}
        <p><i>Your Answer: {{ step.user_answers[loop.index0] }}</i></p>
        {% endif %}
    </div>
    {% endfor %}
    {% endif %}
    {% endfor %}
</body>
</html>
